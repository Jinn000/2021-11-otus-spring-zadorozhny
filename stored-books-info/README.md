# 2021-11-otus-spring-zadorozhny

## Домашнее задание 7:

Домашнее задание выполняется переписыванием предыдущего на JPA.

Цель: максимально просто писать слой репозиториев с применением современных подходов
      Результат: приложение со слоем репозиториев на Spring Data JPA
Результат: Перевод приложения на Spring Data Jpa

Требования:

    Переписать все репозитории по работе с книгами на Spring Data JPA репозитории.
    Используйте spring-boot-starter-data-jpa.
    Кастомные методы репозиториев (или с хитрым @Query) покрыть тестами, используя H2.
    @Transactional рекомендуется ставить на методы сервисов, а не репозиториев. Это домашнее задание будет использоваться в качестве основы для других ДЗ Данная работа не засчитывает предыдущую!



Вопросы:
 1. Hibernate.unproxy(ХХХ) - Пришлось в тестах получать обьект из прокси. Иначе, метод assertThat(ххх).usingRecursiveComparison() ругался на то что обьекты хоть и имеют одинаковые данные в полях,
  но все-же не равны. Это нормально?
 2. bookRepository.getById(bookId) кидает исключение при ненахождении по id. Довольно жестко. Хотелось бы получать null млм Optional, наверное. Как с этим жить?
 3. В продолжение 2го вопроса - когда использовать getById, а когда findById?
  